# contributing

Thanks for considering to contribute!

GitHub's API for Discussions is currently only available through the GraphQL
API, which currently requires authentication for all requests. With the way
giscus works, you'll need to create a GitHub App in order to get it
running on your machine. Follow the [self-hosting guide][self-hosting] to get
it running.

## setup

This project is built with [Next.js][next.js]. To get started:

1. `yarn`: install dependencies
2. `yarn dev`: compile and hot-reload for development
3. `yarn build`: compile and minify for production
4. `yarn lint`: lint and fix files
5. `yarn start`: serve the compiled build in production mode

## creating new themes

If you want to submit your custom theme to giscus, create a new file in
[`styles/themes`][themes-dir]. The file name (without `.css`) will be the
theme's key. Make sure to use the theme's key in the `[data-theme=]` selector.
For example, use `[data-theme='my_theme']` for `my_theme.css`. Once you've
added the theme file, add the key and name to `Theme` in
[`lib/variables.ts`][variables] to register it.

You can use the other theme files as reference. A lot of the variables aren't
actually used, but I haven't found a way to remove them reliably. (I've tried
PurgeCSS but it didn't play well with the setup.)

For the most minimal example, I've removed the unused variables by hand
and you can see the result in [`custom_example.css`][example]. You can
`@import` [`github-syntax-dark`][syntax-dark] or
[`github-syntax-light`][syntax-light] for the syntax themes.

If you want to customize the syntax themes, you can replace the `@import` with
the actual CSS instead. The classes with the `pl-` prefix are for the syntax
theme. See the compiled example [example][example-compiled] for more details.

Several [classes prefixed with `gsc-`][gsc-classes] are used in the HTML
generated by giscus. You can take advantage of this to further customize your
theme. Note that the classes and HTML structure are subject to change, as
updates to giscus may require modifications to the HTML.

If you want to use a custom theme without submitting it to giscus (by using a
[custom theme URL][custom-theme-url]), make sure to use
**`[data-theme='custom']`** as the selector,
**otherwise your theme will not work**. That said, if you create a nice theme,
I'd appreciate it if you create a PR instead so others can use it easily.

[self-hosting]: SELF-HOSTING.md
[next.js]: https://github.com/vercel/next.js
[themes-dir]: styles/themes
[example]: styles/themes/custom_example.css
[syntax-dark]: https://github.com/primer/github-syntax-dark
[syntax-light]: https://github.com/primer/github-syntax-light
[example-compiled]: https://giscus.app/themes/custom_example.css
[gsc-classes]: https://github.com/laymonage/giscus/search?q=gsc
[custom-theme-url]: https://github.com/laymonage/giscus/blob/main/ADVANCED-USAGE.md#data-theme
[variables]: lib/variables.ts
